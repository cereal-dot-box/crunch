{
    cert_issuer internal
}

crunch.cereal.box {
    # GraphQL endpoint to backend
    handle /graphql* {
        reverse_proxy backend:3000
    }

    # Health endpoint to backend
    handle /health* {
        reverse_proxy backend:3000
    }

    # API routes to backend (keep /api prefix for auth routes)
    handle /api/* {
        reverse_proxy backend:3000
    }

    # Everything else to frontend
    reverse_proxy frontend:80
}
